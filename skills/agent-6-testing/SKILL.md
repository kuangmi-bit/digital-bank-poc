---
name: agent-6-testing
version: 1.0.0
description: æµ‹è¯•æ‰§è¡Œè‡ªåŠ¨æœºAgentæŠ€èƒ½ - è´Ÿè´£è‡ªåŠ¨åŒ–æµ‹è¯•çš„æ‰§è¡Œã€æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆå’Œæµ‹è¯•æŠ¥å‘Šè¾“å‡ºã€‚ä½¿ç”¨Postman + Cypress + JMeter + TestRailæŠ€æœ¯æ ˆã€‚
author: Digital Bank POC Team
license: MIT
keywords:
  - testing
  - automation
  - postman
  - cypress
  - jmeter
  - api-testing
  - e2e-testing
  - performance-testing
---

# Agent 6: æµ‹è¯•æ‰§è¡Œè‡ªåŠ¨æœº ğŸ§ª

## æ¦‚è¿°

Agent 6è´Ÿè´£è‡ªåŠ¨åŒ–æµ‹è¯•çš„æ‰§è¡Œã€æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆå’Œæµ‹è¯•æŠ¥å‘Šè¾“å‡ºã€‚ç¡®ä¿æ‰€æœ‰åŠŸèƒ½ã€æ€§èƒ½å’Œé›†æˆæµ‹è¯•è‡ªåŠ¨åŒ–æ‰§è¡Œï¼Œæä¾›å…¨é¢çš„æµ‹è¯•è¦†ç›–ã€‚

## ä½•æ—¶ä½¿ç”¨

å½“éœ€è¦ï¼š
- æ‰§è¡ŒAPIæµ‹è¯•
- æ‰§è¡ŒE2Eæµ‹è¯•
- æ‰§è¡Œæ€§èƒ½æµ‹è¯•
- ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
- éªŒè¯æµ‹è¯•è¦†ç›–ç‡

## æŠ€æœ¯æ ˆ

- **APIæµ‹è¯•**: Postman / Newman
- **E2Eæµ‹è¯•**: Cypress
- **æ€§èƒ½æµ‹è¯•**: JMeter
- **æµ‹è¯•ç®¡ç†**: TestRail
- **æµ‹è¯•æ•°æ®**: Faker.js / Python Faker

## æ ¸å¿ƒåŠŸèƒ½

### 1. APIæµ‹è¯•
- åŸºäºOpenAPIè‡ªåŠ¨ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹
- APIå›å½’æµ‹è¯•
- é›†æˆæµ‹è¯•

### 2. E2Eæµ‹è¯•
- ç”¨æˆ·æµç¨‹æµ‹è¯•ï¼ˆç™»å½•ã€è½¬è´¦ç­‰ï¼‰
- é¡µé¢åŠŸèƒ½æµ‹è¯•
- è·¨æµè§ˆå™¨æµ‹è¯•

### 3. æ€§èƒ½æµ‹è¯•
- è´Ÿè½½æµ‹è¯•ï¼ˆ100 TPSï¼‰
- å‹åŠ›æµ‹è¯•
- å“åº”æ—¶é—´æµ‹è¯•ï¼ˆP95 < 2sï¼‰

### 4. æµ‹è¯•æ•°æ®
- æµ‹è¯•æ•°æ®è‡ªåŠ¨ç”Ÿæˆ
- æµ‹è¯•æ•°æ®ç®¡ç†

## è‡ªåŠ¨åŒ–èƒ½åŠ›

- **æµ‹è¯•è‡ªåŠ¨åŒ–**: 90%è‡ªåŠ¨åŒ–
  - APIæµ‹è¯•ç”¨ä¾‹è‡ªåŠ¨ç”Ÿæˆï¼ˆåŸºäºOpenAPIï¼‰
  - E2Eæµ‹è¯•è„šæœ¬è‡ªåŠ¨ç”Ÿæˆï¼ˆåŸºäºé¡µé¢æµç¨‹ï¼‰
  - æ€§èƒ½æµ‹è¯•è„šæœ¬è‡ªåŠ¨ç”Ÿæˆï¼ˆåŸºäºè´Ÿè½½æ¨¡å‹ï¼‰
  - æµ‹è¯•æ•°æ®è‡ªåŠ¨å‡†å¤‡
  - æµ‹è¯•æŠ¥å‘Šè‡ªåŠ¨è¾“å‡º

## æ‰§è¡ŒèŠ‚å¥

- **æ¯å°æ—¶**: APIå›å½’æµ‹è¯•
- **æ¯6å°æ—¶**: é›†æˆæµ‹è¯•
- **æ¯24å°æ—¶**: E2Eæµ‹è¯• + æ€§èƒ½æµ‹è¯•

## äº¤ä»˜æ ‡å‡†

- **APIæµ‹è¯•ç”¨ä¾‹**: 100+ä¸ª
- **E2Eæµ‹è¯•åœºæ™¯**: 10+ä¸ª
- **æ€§èƒ½æµ‹è¯•è„šæœ¬**: 5+ä¸ª
- **æµ‹è¯•è¦†ç›–ç‡**: æ ¸å¿ƒåŠŸèƒ½â‰¥70%

## é¡¹ç›®ç»“æ„

```
tests/
â”œâ”€â”€ postman/
â”‚   â””â”€â”€ collections/     # Postmanæµ‹è¯•é›†åˆ
â”‚       â”œâ”€â”€ core-bank.json
â”‚       â”œâ”€â”€ payment.json
â”‚       â””â”€â”€ risk.json
â”œâ”€â”€ cypress/
â”‚   â””â”€â”€ e2e/             # E2Eæµ‹è¯•è„šæœ¬
â”‚       â”œâ”€â”€ login-flow.spec.js
â”‚       â”œâ”€â”€ transfer-flow.spec.js
â”‚       â””â”€â”€ ...
â”œâ”€â”€ jmeter/
â”‚   â””â”€â”€ test-plans/      # JMeteræµ‹è¯•è®¡åˆ’
â”‚       â”œâ”€â”€ load-test.jmx
â”‚       â””â”€â”€ stress-test.jmx
â”œâ”€â”€ data/
â”‚   â””â”€â”€ generators/      # æµ‹è¯•æ•°æ®ç”Ÿæˆè„šæœ¬
â””â”€â”€ reports/             # æµ‹è¯•æŠ¥å‘Š
```

## æµ‹è¯•æŠ¥å‘Šæ ¼å¼

- æµ‹è¯•æ‰§è¡Œæ‘˜è¦
- é€šè¿‡/å¤±è´¥ç»Ÿè®¡
- æ€§èƒ½æŒ‡æ ‡ï¼ˆå“åº”æ—¶é—´ã€TPSï¼‰
- é—®é¢˜åˆ—è¡¨å’Œä¼˜å…ˆçº§
- æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š

## åä½œå…³ç³»

- **ä¸æ‰€æœ‰æœåŠ¡Agent**: æµ‹è¯•å„æœåŠ¡çš„API
- **ä¸Agent 4**: æµ‹è¯•å‰ç«¯E2Eæµç¨‹
- **ä¸Agent 0**: æŠ¥å‘Šæµ‹è¯•ç»“æœå’Œé—®é¢˜
- **ä¸Agent 8**: åœ¨CI/CDä¸­é›†æˆæµ‹è¯•

## å…³é”®é‡Œç¨‹ç¢‘

- **Day 2**: æµ‹è¯•æ¡†æ¶é…ç½®å®Œæˆ
- **Day 4**: åŸºç¡€APIæµ‹è¯•ç”¨ä¾‹å®Œæˆ
- **Day 5**: é›†æˆæµ‹è¯•å’ŒE2Eæµ‹è¯•å®Œæˆ
- **Day 8**: å®Œæ•´æµ‹è¯•å¥—ä»¶æ‰§è¡Œ
- **Day 10**: æ€§èƒ½æµ‹è¯•å®Œæˆ
- **Day 11**: ç»¼åˆæµ‹è¯•æŠ¥å‘Šå®Œæˆ

## æµ‹è¯•ç¤ºä¾‹

### Postmanæµ‹è¯•ç¤ºä¾‹
```javascript
pm.test("Status code is 200", function () {
    pm.response.to.have.status(200);
});

pm.test("Response time is less than 2000ms", function () {
    pm.expect(pm.response.responseTime).to.be.below(2000);
});
```

### Cypress E2Eæµ‹è¯•ç¤ºä¾‹
```javascript
describe('Transfer Flow', () => {
  it('should complete a transfer', () => {
    cy.visit('/login');
    cy.get('[data-testid="username"]').type('testuser');
    cy.get('[data-testid="password"]').type('password');
    cy.get('[data-testid="login-button"]').click();
    
    cy.visit('/transfer');
    cy.get('[data-testid="amount"]').type('100');
    cy.get('[data-testid="submit"]').click();
    
    cy.contains('è½¬è´¦æˆåŠŸ').should('be.visible');
  });
});
```

## æŠ€æœ¯æ ‡å‡†è§„èŒƒè¦æ±‚

**é‡è¦**: å¿…é¡»ä¸¥æ ¼éµå¾ªæŠ€æœ¯æ ‡å‡†è§„èŒƒå’Œå‘½åè§„èŒƒã€‚

### å¿…é¡»éµå¾ªçš„è§„èŒƒæ–‡æ¡£

1. **æŠ€æœ¯æ ‡å‡†è§„èŒƒ v1.0**: `docs/architecture/technical-standards-v1.0.md`
2. **å‘½åè§„èŒƒ v1.0**: `docs/architecture/naming-conventions.md`

### æµ‹è¯•å‘½åè§„èŒƒè¦ç‚¹

- **æµ‹è¯•æ–‡ä»¶**: éµå¾ªå„æŠ€æœ¯æ ˆè§„èŒƒ (å¦‚ `AccountServiceTest.java`, `payment.test.js`, `test_risk_service.py`)
- **æµ‹è¯•æ–¹æ³•**: `test_{scenario}_{expected_result}()` æˆ– `should_{expected_result}_when_{condition}()`
- **æµ‹è¯•æ•°æ®**: æè¿°æ€§å‘½å (å¦‚ `validAccountData`, `invalidAccountNumber`)
- **æµ‹è¯•æŠ¥å‘Š**: `{service}-test-report-{date}.json` (kebab-case)

## æµ‹è¯•æ•°æ®ç®¡ç†

### æµ‹è¯•æ•°æ®ç”Ÿæˆå™¨

```javascript
// tests/data/generators/account-generator.js
const { faker } = require('@faker-js/faker/locale/zh_CN');

const generateAccount = (overrides = {}) => ({
  accountNumber: faker.string.numeric(16),
  customerName: faker.person.fullName(),
  balance: faker.number.float({ min: 0, max: 1000000, precision: 0.01 }),
  status: faker.helpers.arrayElement(['active', 'inactive', 'frozen']),
  accountType: faker.helpers.arrayElement(['savings', 'checking']),
  createdAt: faker.date.past().toISOString(),
  ...overrides,
});

const generateTransaction = (overrides = {}) => ({
  transactionId: `TXN${faker.string.numeric(12)}`,
  fromAccountId: faker.string.uuid(),
  toAccountId: faker.string.uuid(),
  amount: faker.number.float({ min: 1, max: 50000, precision: 0.01 }),
  type: faker.helpers.arrayElement(['transfer', 'deposit', 'withdrawal']),
  status: faker.helpers.arrayElement(['pending', 'completed', 'failed']),
  createdAt: faker.date.recent().toISOString(),
  ...overrides,
});

module.exports = {
  generateAccount,
  generateTransaction,
  generateAccounts: (count) => Array.from({ length: count }, generateAccount),
  generateTransactions: (count) => Array.from({ length: count }, generateTransaction),
};
```

### æµ‹è¯•æ•°æ®Fixtures

```javascript
// tests/fixtures/accounts.json
{
  "validAccount": {
    "accountNumber": "6222021234567890",
    "customerName": "å¼ ä¸‰",
    "balance": 10000.00,
    "status": "active"
  },
  "frozenAccount": {
    "accountNumber": "6222029876543210",
    "customerName": "æå››",
    "balance": 5000.00,
    "status": "frozen"
  },
  "zeroBalanceAccount": {
    "accountNumber": "6222025555555555",
    "customerName": "ç‹äº”",
    "balance": 0.00,
    "status": "active"
  }
}
```

### æµ‹è¯•æ•°æ®æ¸…ç†

```javascript
// tests/helpers/cleanup.js
const mongoose = require('mongoose');

async function cleanupTestData() {
  const collections = await mongoose.connection.db.collections();
  for (const collection of collections) {
    if (collection.collectionName.startsWith('test_')) {
      await collection.deleteMany({});
    }
  }
}

async function setupTestData(fixtures) {
  // å¯¼å…¥æµ‹è¯•æ•°æ®
  for (const [collectionName, data] of Object.entries(fixtures)) {
    await mongoose.connection.db.collection(collectionName).insertMany(data);
  }
}

module.exports = { cleanupTestData, setupTestData };
```

---

## MockæœåŠ¡é…ç½®

### WireMocké…ç½®

```json
// tests/mocks/wiremock/mappings/risk-service.json
{
  "mappings": [
    {
      "name": "Risk Check - Approve",
      "request": {
        "method": "POST",
        "urlPath": "/api/v1/risk/check",
        "bodyPatterns": [
          {
            "matchesJsonPath": "$.amount",
            "lessThan": 50000
          }
        ]
      },
      "response": {
        "status": 200,
        "headers": {
          "Content-Type": "application/json"
        },
        "jsonBody": {
          "code": 200,
          "message": "Success",
          "data": {
            "decision": "APPROVE",
            "riskScore": 10,
            "riskLevel": "LOW"
          }
        }
      }
    },
    {
      "name": "Risk Check - Reject High Amount",
      "request": {
        "method": "POST",
        "urlPath": "/api/v1/risk/check",
        "bodyPatterns": [
          {
            "matchesJsonPath": "$.amount",
            "greaterThanOrEqual": 50000
          }
        ]
      },
      "response": {
        "status": 403,
        "jsonBody": {
          "code": "RKB003",
          "message": "è¶…è¿‡äº¤æ˜“é™é¢"
        }
      }
    }
  ]
}
```

### Mock Service Worker (MSW)

```javascript
// tests/mocks/handlers.js
import { rest } from 'msw';

export const handlers = [
  // è´¦æˆ·æŸ¥è¯¢Mock
  rest.get('/api/v1/accounts/:id', (req, res, ctx) => {
    const { id } = req.params;
    return res(
      ctx.status(200),
      ctx.json({
        code: 200,
        data: {
          id,
          accountNumber: '6222021234567890',
          balance: 10000.00,
          status: 'active'
        }
      })
    );
  }),

  // è½¬è´¦Mock
  rest.post('/api/v1/transactions/transfer', async (req, res, ctx) => {
    const body = await req.json();
    if (body.amount > 500000) {
      return res(
        ctx.status(400),
        ctx.json({ code: 'CBB004', message: 'è¶…è¿‡å•ç¬”é™é¢' })
      );
    }
    return res(
      ctx.status(201),
      ctx.json({
        code: 201,
        data: { transactionId: 'TXN123456789012' }
      })
    );
  }),
];
```

---

## å¥‘çº¦æµ‹è¯•

### Pactå¥‘çº¦æµ‹è¯•ï¼ˆæ¶ˆè´¹è€…ç«¯ï¼‰

```javascript
// tests/contract/consumer/account.pact.spec.js
const { Pact } = require('@pact-foundation/pact');
const { accountApi } = require('../../../src/services/account-api');

describe('Account API Contract', () => {
  const provider = new Pact({
    consumer: 'frontend',
    provider: 'core-bank-service',
    port: 1234,
  });

  beforeAll(() => provider.setup());
  afterAll(() => provider.finalize());
  afterEach(() => provider.verify());

  describe('GET /api/v1/accounts/:id', () => {
    it('should return account details', async () => {
      await provider.addInteraction({
        state: 'account with id 123 exists',
        uponReceiving: 'a request for account 123',
        withRequest: {
          method: 'GET',
          path: '/api/v1/accounts/123',
        },
        willRespondWith: {
          status: 200,
          headers: { 'Content-Type': 'application/json' },
          body: {
            code: 200,
            data: {
              id: '123',
              accountNumber: Pact.Matchers.string('6222021234567890'),
              balance: Pact.Matchers.decimal(10000.00),
              status: Pact.Matchers.term({
                generate: 'active',
                matcher: 'active|inactive|frozen'
              })
            }
          }
        }
      });

      const account = await accountApi.getAccountById('123');
      expect(account.data.id).toBe('123');
    });
  });
});
```

### å¥‘çº¦æµ‹è¯•ï¼ˆæä¾›è€…ç«¯ï¼‰

```javascript
// tests/contract/provider/verify.spec.js
const { Verifier } = require('@pact-foundation/pact');

describe('Pact Verification', () => {
  it('validates the expectations of frontend', async () => {
    const verifier = new Verifier({
      providerBaseUrl: 'http://localhost:8080',
      pactBrokerUrl: process.env.PACT_BROKER_URL,
      provider: 'core-bank-service',
      publishVerificationResult: true,
      providerVersion: process.env.GIT_COMMIT,
    });

    await verifier.verifyProvider();
  });
});
```

---

## æµ‹è¯•ç¯å¢ƒéš”ç¦»

### Docker Composeæµ‹è¯•ç¯å¢ƒ

```yaml
# tests/docker-compose.test.yml
version: '3.8'

services:
  postgres-test:
    image: postgres:15
    environment:
      POSTGRES_DB: testbank_test
      POSTGRES_USER: test
      POSTGRES_PASSWORD: test
    ports:
      - "5433:5432"
    tmpfs:
      - /var/lib/postgresql/data  # ä½¿ç”¨å†…å­˜å­˜å‚¨ï¼Œæµ‹è¯•åè‡ªåŠ¨æ¸…ç†

  mongodb-test:
    image: mongo:7.0
    ports:
      - "27018:27017"
    tmpfs:
      - /data/db

  redis-test:
    image: redis:7
    ports:
      - "6380:6379"

  wiremock:
    image: wiremock/wiremock:3.0.0
    ports:
      - "8090:8080"
    volumes:
      - ./mocks/wiremock:/home/wiremock
    command: --verbose
```

### æµ‹è¯•ç¯å¢ƒé…ç½®

```javascript
// tests/config/test-env.js
module.exports = {
  database: {
    host: process.env.TEST_DB_HOST || 'localhost',
    port: process.env.TEST_DB_PORT || 5433,
    name: 'testbank_test',
    user: 'test',
    password: 'test',
  },
  mongodb: {
    uri: process.env.TEST_MONGO_URI || 'mongodb://localhost:27018/testbank_test',
  },
  redis: {
    host: process.env.TEST_REDIS_HOST || 'localhost',
    port: process.env.TEST_REDIS_PORT || 6380,
  },
  mockServer: {
    url: process.env.MOCK_SERVER_URL || 'http://localhost:8090',
  },
};
```

---

## æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

### æµ‹è¯•æŠ¥å‘Šæ ¼å¼

```json
{
  "reportName": "Digital Bank POC - æµ‹è¯•æŠ¥å‘Š",
  "reportDate": "2026-01-26",
  "environment": "QA",
  "summary": {
    "totalTests": 150,
    "passed": 145,
    "failed": 3,
    "skipped": 2,
    "passRate": "96.67%",
    "duration": "5m 23s"
  },
  "byCategory": {
    "unit": { "total": 80, "passed": 79, "failed": 1 },
    "integration": { "total": 40, "passed": 38, "failed": 2 },
    "e2e": { "total": 20, "passed": 19, "failed": 1 },
    "performance": { "total": 10, "passed": 9, "failed": 0 }
  },
  "byService": {
    "core-bank-service": { "total": 50, "passed": 48, "failed": 2 },
    "payment-service": { "total": 35, "passed": 35, "failed": 0 },
    "risk-service": { "total": 25, "passed": 24, "failed": 1 },
    "frontend": { "total": 40, "passed": 38, "failed": 0 }
  },
  "performance": {
    "tps": 120,
    "p95ResponseTime": "1.2s",
    "p99ResponseTime": "1.8s",
    "errorRate": "0.05%"
  },
  "failedTests": [
    {
      "name": "test_transfer_insufficient_balance",
      "service": "core-bank-service",
      "error": "Expected 400 but got 500",
      "category": "integration"
    }
  ]
}
```

---

## ç›¸å…³èµ„æº

- Agentå¯åŠ¨æç¤ºè¯: `agent_prompts.md`
- è¯¦ç»†å·¥ä½œè®¡åˆ’: `digital_bank_poc_workplan.md`
- **æŠ€æœ¯æ ‡å‡†è§„èŒƒ v1.0**: `docs/architecture/technical-standards-v1.0.md` âš ï¸ **å¿…é¡»éµå¾ª**
- **å‘½åè§„èŒƒ v1.0**: `docs/architecture/naming-conventions.md` âš ï¸ **å¿…é¡»éµå¾ª**

---

**ç‰ˆæœ¬**: v1.1.0  
**åˆ›å»ºæ—¥æœŸ**: 2026-01-26  
**ç»´æŠ¤è€…**: Digital Bank POC Team

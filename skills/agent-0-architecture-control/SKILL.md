---
name: agent-0-architecture-control
version: 1.0.0
description: 架构管控中枢Agent技能 - 负责数字银行POC系统的架构决策、进度协调和质量把关。在每日决策窗口处理技术决策，协调各Agent工作，确保项目按时高质量交付。
author: Digital Bank POC Team
license: MIT
keywords:
  - architecture
  - decision-making
  - project-management
  - coordination
  - quality-assurance
  - adr
  - enterprise-architecture
---

# Agent 0: 架构管控中枢 🎯

## 概述

Agent 0是数字银行POC系统的架构管控中枢，负责整个项目的架构决策、进度协调和质量把关。作为决策大脑和架构守护者，确保所有技术决策符合标准，项目进度可控，最终交付物质量达标。

## 何时使用

当需要：
- 进行架构设计审批和技术决策
- 协调多个Agent之间的工作
- 监控项目进度和风险管理
- 生成架构决策记录(ADR)
- 进行最终验收和质量把关

## 核心职责

1. **架构设计审批与治理**：审查所有架构设计，确保符合技术标准和最佳实践
2. **技术决策集中处理**：在每日决策窗口（10:00-12:00, 22:00-23:00）处理技术决策
3. **跨Agent协调与冲突解决**：协调各Agent之间的依赖关系和冲突
4. **项目进度监控与风险管理**：跟踪项目进度，识别和应对风险
5. **最终验收与质量把关**：确保交付物符合验收标准

## 工作模式

### 决策窗口
- **决策窗口1**: 每日 10:00-12:00 - 审查、审批、协调
- **决策窗口2**: 每日 22:00-23:00 - 审查、审批、生成简报
- **紧急响应**: P0紧急事项实时处理

### 决策方式
- 审批预生成的决策包，10分钟/项
- 批量处理决策事项，提高效率
- 紧急事项实时响应

## 关键输出

- **架构决策记录(ADR)**: ≥7篇
- **技术标准规范文档**: v1.0, v2.0
- **每日进度简报**: Day 1-14
- **阶段进度报告**: Day 7, Day 11
- **最终验收报告**: 项目结束时

## 架构决策记录(ADR)模板

```markdown
# ADR-XXX: [决策标题]

## 状态
[提议 | 已接受 | 已拒绝 | 已废弃]

## 上下文
[为什么需要这个决策]

## 决策
[我们决定做什么]

## 后果
[采用这个决策的后果，包括正面和负面]

## 日期
[YYYY-MM-DD]
```

## 每日进度简报模板

```markdown
# 项目进度简报 - Day X

## 总体进度
- 计划完成度: X%
- 实际完成度: X%
- 偏差: X%

## 各Agent进度
- Agent 1: X%
- Agent 2: X%
- ...

## 关键里程碑
- [ ] 里程碑1
- [ ] 里程碑2

## 阻塞问题
- 问题1: [描述] [负责人] [预计解决时间]
- 问题2: [描述] [负责人] [预计解决时间]

## 明日计划
- 任务1
- 任务2
```

## 协作关系

- **与所有Agent**: 审查设计、审批决策、协调冲突
- **重点关注**: 
  - Agent 1-4的服务设计
  - Agent 5的基础设施配置
  - Agent 6的测试结果
  - Agent 7的安全扫描结果
  - Agent 8的部署状态
  - Agent 9的数据模型设计

## 验收标准

- 所有架构决策有记录
- 技术标准规范完整
- 项目进度按时完成
- 最终验收通过

## 工作流程

1. **每日10:00-12:00**: 决策窗口1
   - 审查各Agent提交的架构设计
   - 审批技术决策
   - 协调跨Agent依赖
   - 处理阻塞问题

2. **每日22:00-23:00**: 决策窗口2
   - 审查当日工作成果
   - 生成每日进度简报
   - 规划次日工作重点

3. **紧急事项**: 实时处理P0级别问题

## 技术标准规范要求

**重要**: 所有Agent必须严格遵循技术标准规范和命名规范。

### 必须遵循的规范文档

1. **技术标准规范 v1.0**: `docs/architecture/technical-standards-v1.0.md`
2. **命名规范 v1.0**: `docs/architecture/naming-conventions.md`

### 规范审查职责

在审查各Agent提交的设计和代码时，必须检查是否符合技术标准规范和命名规范。

## 架构评审检查清单

### 设计评审清单

在审查各Agent提交的设计时，必须检查以下内容：

#### 代码设计评审
- [ ] 是否符合技术标准规范中的代码规范
- [ ] 是否符合命名规范
- [ ] 是否有单元测试且覆盖率达标
- [ ] 是否有API文档（OpenAPI 3.0）
- [ ] 异常处理是否完善
- [ ] 日志记录是否符合规范

#### API设计评审
- [ ] 是否符合RESTful设计原则
- [ ] URL路径是否使用kebab-case
- [ ] HTTP状态码使用是否正确
- [ ] 响应格式是否统一
- [ ] 是否有版本控制（/api/v1/）
- [ ] 是否有分页支持

#### 数据库设计评审
- [ ] 表名是否使用snake_case复数形式
- [ ] 列名是否使用snake_case
- [ ] 是否有适当的索引
- [ ] 是否有外键约束
- [ ] 数据类型是否合适

#### 安全评审
- [ ] 是否有敏感数据暴露风险
- [ ] 是否有SQL注入风险
- [ ] 是否有XSS风险
- [ ] JWT Token处理是否安全
- [ ] 密码是否加密存储

---

## 技术债务管理

### 技术债务记录模板

```markdown
# 技术债务记录 - TD-XXX

## 基本信息
- **ID**: TD-XXX
- **标题**: [简短描述]
- **优先级**: P0/P1/P2/P3
- **责任Agent**: Agent X
- **创建日期**: YYYY-MM-DD
- **预计解决日期**: YYYY-MM-DD

## 描述
[详细描述技术债务的内容]

## 影响
[描述如果不解决会带来什么影响]

## 解决方案
[建议的解决方案]

## 状态
[待处理 | 处理中 | 已解决 | 延期]
```

### 技术债务优先级定义

| 优先级 | 定义 | 处理时限 |
|--------|------|----------|
| P0 | 阻塞性债务，影响核心功能 | 立即处理 |
| P1 | 高优先级，影响性能或安全 | 3天内处理 |
| P2 | 中优先级，影响可维护性 | 1周内处理 |
| P3 | 低优先级，代码优化类 | 迭代中处理 |

---

## 服务依赖矩阵

### 依赖矩阵模板

| 调用方 → | Core Bank | Payment | Risk | Frontend | Gateway |
|---------|-----------|---------|------|----------|---------|
| **Core Bank** | - | 调用支付 | 调用风控 | - | 暴露API |
| **Payment** | 调用账户 | - | 调用风控 | - | 暴露API |
| **Risk** | - | - | - | - | 暴露API |
| **Frontend** | 调用 | 调用 | - | - | 通过网关 |
| **Gateway** | 路由 | 路由 | 路由 | 路由 | - |

### 依赖关系要求

1. **禁止循环依赖**: 服务间不得形成循环调用
2. **单向依赖**: 上层服务调用下层服务
3. **异步解耦**: 非实时场景使用消息队列解耦
4. **超时配置**: 所有服务间调用必须配置超时（默认10s）
5. **熔断配置**: 必须配置服务熔断（50%错误率触发）

---

## 架构合规检查

### 自动化合规检查脚本

```bash
#!/bin/bash
# architecture-compliance-check.sh
# 架构合规性检查脚本

echo "=== 架构合规检查 ==="

# 1. 检查命名规范
echo "检查命名规范..."
# 检查Java类名是否PascalCase
find . -name "*.java" -exec grep -l "class [a-z]" {} \;

# 检查API路径是否kebab-case
grep -r "RequestMapping" --include="*.java" | grep -v "kebab"

# 2. 检查数据库表名
echo "检查数据库表名..."
grep -r "CREATE TABLE" --include="*.sql" | grep -v "snake_case"

# 3. 检查环境变量命名
echo "检查环境变量..."
grep -r "System.getenv" --include="*.java" | grep -v "UPPER_SNAKE"

# 4. 检查API版本
echo "检查API版本..."
grep -r "/api/" --include="*.java" | grep -v "/api/v[0-9]/"

echo "=== 检查完成 ==="
```

### 合规检查报告模板

```markdown
# 架构合规检查报告 - Day X

## 检查时间
YYYY-MM-DD HH:MM

## 检查范围
- [ ] Agent 1: Core Bank Service
- [ ] Agent 2: Payment Service
- [ ] Agent 3: Risk Service
- [ ] Agent 4: Frontend

## 检查结果

### 命名规范合规
| 服务 | 类名 | 方法名 | API路径 | 数据库 | 状态 |
|-----|------|--------|---------|--------|------|
| Core Bank | ✅ | ✅ | ✅ | ✅ | 通过 |
| Payment | ✅ | ✅ | ✅ | ✅ | 通过 |
| Risk | ✅ | ✅ | ✅ | ✅ | 通过 |

### 安全规范合规
| 服务 | SAST | DAST | 依赖扫描 | 状态 |
|-----|------|------|---------|------|
| Core Bank | ✅ | ✅ | ✅ | 通过 |
| Payment | ✅ | ✅ | ✅ | 通过 |

### 问题汇总
1. [问题描述] - [责任Agent] - [严重程度]

## 整改要求
[需要整改的事项和时限]
```

---

## 跨Agent接口契约

### 接口契约定义

所有服务间接口必须定义契约，包含：

1. **接口版本**: v1, v2
2. **请求格式**: JSON Schema
3. **响应格式**: JSON Schema
4. **错误码**: 统一错误码
5. **超时时间**: 默认超时配置
6. **重试策略**: 重试次数和间隔

### 契约变更流程

1. 提出变更请求 → Agent 0审批
2. 影响分析 → 通知相关Agent
3. 兼容性评估 → 确定是否需要版本升级
4. 实施变更 → 所有相关Agent同步修改
5. 回归测试 → Agent 6执行集成测试

---

## 相关资源

- 项目计划文档: `digital_bank_poc_plan.md`
- 详细工作计划: `digital_bank_poc_workplan.md`
- Agent启动提示词: `agent_prompts.md`
- **技术标准规范 v1.0**: `docs/architecture/technical-standards-v1.0.md` ⚠️ **必须遵循**
- **命名规范 v1.0**: `docs/architecture/naming-conventions.md` ⚠️ **必须遵循**

---

**版本**: v1.1.0  
**创建日期**: 2026-01-26  
**维护者**: Digital Bank POC Team

# 数字银行 POC 演示脚本

**版本**: v1.0
**日期**: 2026-02-05
**演示时长**: 约 20 分钟

---

## 演示概述

本演示展示数字银行 POC 项目的核心功能和技术亮点，包括：
1. 基础银行业务（开户、转账）
2. 扩展功能（批量转账、预约转账、账单支付）
3. 风控系统实时拦截
4. 系统架构与性能

---

## 1. 项目介绍（2 分钟）

### 演示内容

- **项目目标**: 构建现代化数字银行核心系统
- **技术栈**:
  - 后端: Java 17 + Spring Boot 3.2 + Node.js 20 + Python 3.11
  - 数据库: PostgreSQL 15 + MongoDB 7 + Elasticsearch 8
  - 部署: Kubernetes + Docker
- **开发周期**: 14 天 POC
- **Agent 协作**: 10 个 AI Agent 分工协作

### 展示资料

- 打开 `docs/agent-progress-monitor.html` 展示进度
- 打开架构图 `docs/architecture/system-architecture.png`

---

## 2. 基础功能演示（5 分钟）

### 2.1 客户开户

**演示步骤**:

1. 打开前端首页 `http://localhost:5173`
2. 点击「客户管理」→「新建客户」
3. 填写客户信息：
   - 姓名: 演示用户
   - 手机: 13800138000
   - 身份证: 110101199001011234
4. 点击提交，展示成功创建

**讲解要点**:
- 输入验证
- 客户 ID 自动生成
- 状态自动设为 active

### 2.2 账户开户

**演示步骤**:

1. 点击「账户管理」→「开户」
2. 选择刚创建的客户
3. 选择账户类型: 储蓄账户
4. 点击提交

**讲解要点**:
- 账户号自动生成（62 开头 16 位）
- 初始余额为 0
- 关联客户 ID

### 2.3 账户充值 & 转账

**演示步骤**:

1. 管理后台为账户 1 充值 10,000 元
2. 再创建一个账户 2
3. 点击「转账」
4. 从账户 1 转账 1,000 元到账户 2
5. 展示转账成功，双方余额变化

**讲解要点**:
- 实时余额更新
- 交易记录生成
- 风控检查通过

---

## 3. 扩展功能演示（8 分钟）

### 3.1 批量转账

**场景**: 企业工资发放

**演示步骤**:

1. 点击「批量转账」
2. 添加多笔转账（3-5 笔）：
   ```
   账户1 → 账户2: 500 元 (备注: 工资)
   账户1 → 账户3: 600 元 (备注: 工资)
   账户1 → 账户4: 700 元 (备注: 工资)
   ```
3. 点击提交
4. 展示批量结果：成功数、失败数、每笔状态

**讲解要点**:
- 单批最多 100 笔
- 单笔独立事务，允许部分失败
- batchId 幂等性
- 并行处理提升效率

### 3.2 预约转账

**场景**: 定期还款/定投

**演示步骤**:

1. 点击「预约转账」
2. 创建一个 5 分钟后执行的预约：
   - 从账户 1
   - 到账户 2
   - 金额 200 元
   - 时间: 5 分钟后
3. 展示预约列表，状态为 pending
4. （可选）等待执行或取消预约

**讲解要点**:
- 预约时间必须大于 1 分钟后
- 支持取消未执行的预约
- 定时调度自动执行
- 失败自动重试（最多 3 次）

### 3.3 账单支付

**场景**: 生活缴费

**演示步骤**:

1. 点击「账单支付」
2. 选择账单类型: 电费
3. 输入缴费账号: 1001001
4. 点击查询，展示账单信息：
   - 应缴金额: 156.80 元
   - 缴费期: 2026-01
5. 选择付款账户，点击支付
6. 展示支付成功

**讲解要点**:
- 账单信息缓存（Redis）
- 调用核心银行扣款
- 幂等性保证
- 支付记录可查

---

## 4. 风控演示（3 分钟）

### 4.1 限额拦截

**演示步骤**:

1. 尝试大额转账（超过 50,000 元）
2. 展示风控拦截提示：「单笔转账超过限额」

**讲解要点**:
- 实时风控检查
- 规则引擎可配置
- 403 错误码明确

### 4.2 频率限制

**演示步骤**:

1. 快速连续发起多笔转账（超过 10 次/小时）
2. 展示频率限制拦截

**讲解要点**:
- 基于滑动窗口的频率统计
- 保护账户安全

### 4.3 规则配置展示

打开 `risk-service/config/rules.yaml` 展示：
- 规则类型
- 限额配置
- 优先级设置
- 热加载能力

---

## 5. 技术亮点展示（2 分钟）

### 5.1 系统架构

展示架构图，讲解：
- 微服务拆分（核心银行、支付、风控）
- 服务间通信（REST + 超时重试熔断）
- 数据存储选型

### 5.2 性能优化

- 数据库连接池优化（HikariCP）
- 覆盖索引设计
- Redis 缓存 + 内存降级
- HPA 弹性伸缩

### 5.3 安全加固

- 账户归属校验
- 日志脱敏
- JWT 认证

### 5.4 测试覆盖

- 单元测试 451 用例
- E2E 测试 52 场景
- 覆盖率 89%

---

## 6. Q&A 预备（可选）

### 常见问题

**Q: 如何保证转账的原子性？**
A: 使用数据库事务 + 悲观锁（SELECT FOR UPDATE），按 ID 顺序加锁避免死锁。

**Q: 批量转账性能如何？**
A: 使用 CompletableFuture 并行处理，最多 10 并发，TPS 约 100。

**Q: 风控规则如何更新？**
A: 支持 YAML 热加载，60 秒刷新间隔，无需重启服务。

**Q: 系统如何扩展？**
A: Kubernetes HPA 自动伸缩，CPU > 70% 触发扩容。

---

## 演示环境准备

### 启动服务

```bash
# 启动所有服务
docker-compose up -d

# 或 K8s 部署
kubectl apply -k infrastructure/k8s/overlays/qa
```

### 测试数据准备

```bash
# 运行数据初始化脚本
cd scripts
./init-demo-data.sh
```

### 检查清单

- [ ] 所有服务健康
- [ ] 前端可访问
- [ ] 测试账户已创建
- [ ] 账户有足够余额
- [ ] 风控规则已配置

---

**演示准备完成！**
